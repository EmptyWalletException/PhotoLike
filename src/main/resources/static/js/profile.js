function unbind_callback(a,b){a.status?self.location.reload():$.luoo.msg("操作失败",'<p style="margin-top: 20px; text-align: center;"><span class="icon icon-danger" style="color: #E43E4A; padding-right: 10px; font-size: 14px;"></span>'+a.msg+"</p>",!1,"#000")}function pwd_valid(){var a=($("#txtPassword"),$("#txtNewpassword")),b=$("#txtCmfpassword");return""==$.trim(a.val())?(a.parents(".setting-row").addClass("valid-error"),a.next(".valid-msg").text("新密码不能为空").show(),!1):a.val()!=b.val()?(b.parents(".setting-row").addClass("valid-error"),b.next(".valid-msg").text("确认密码与新密码不一致").show(),!1):!0}function pwd_cback(a,b){return b.data("disabled",!1),a.status?($(".valid-result").hide(),$(".setting-row").removeClass("valid-error"),b.find(".call_back_msg").text(a.msg).show(),setTimeout(function(){self.location.reload()},3e3)):a.field&&($("#txt"+a.field,b).parents(".setting-row").addClass("valid-error"),$("#txt"+a.field,b).next(".valid-msg").text(a.msg).show()),!1}function edit_username_cback(a,b){b.data("disabled",!1),a.status?a.data?b.html(a.data):document.location.reload():(b.addClass("valid-error"),b.find(".valid-msg").text("※"+a.msg).show())}function profile_common_cback(a,b){b.data("disabled",!1),a.status?document.location.reload():a.msg&&$.luoo.msg("操作提示",a.msg)}$(document).ready(function(){var a=new Date;a.setFullYear(a.getFullYear()-1),$("#lnEditBrithday").click(function(){var b=$("#txtBirthday").glDatePicker({cssName:"flatwhite",yearRange:{from:1900,to:(new Date).getFullYear()-1},todayDate:a,dowNames:["日","一","二","三","四","五","六"],monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],onClick:function(a,b,c,d){var e=c.getMonth()+1,f=c.getFullYear()+"-"+e+"-"+c.getDate();$("#txtBirthday").val(f),$("#birthdayPlaceholder").removeClass("helper").text(f)}}).glDatePicker(!0);b.show()}),$("#lnEditUsername").click(function(){$.luoo.get(url("user/update_username"),"",function(a){$.luoo.msg("修改昵称",a.data)})}),$("#lnEditEmail").click(function(){$.luoo.get(url("user/update_email"),"",function(a){$.luoo.msg("修改邮箱",a.data)})}),$("#chkAutoplay").change(function(){var a=$(this).prop("checked")?1:2;$.luoo.post(url("user/update_autoplay"),{s:a},function(a){})}),$(".btn-reload").click(function(){self.location.reload()}),$(".setting-pwd input").focus(function(){$(this).parents(".setting-row").removeClass("valid-error"),$(this).next(".valid-msg").hide()}),$(".input-listener").click(function(){$("#btnBasicSubmit").removeClass("btn-not-ready")})});