function musician_like_callback(a,b){b.data("disabled",!1);var c=$("#btnLike"+b.data("id"));if(-1===a.status){b.data({remote:url("login/dialog"),width:235});var d=b.tip();d.set("events.hide",function(a,b){b.destroy(),$.luoo.destroy_tip(b.id)}),$.luoo.tip.push(d)}else 1===a.status?(c.removeClass("icon-fav").addClass("icon-faved").attr("title",b.data("langliked")),c.data("fav",1)):2===a.status?(c.removeClass("icon-faved").addClass("icon-fav").attr("title",b.data("langlike")),c.data("fav",0)):a.msg&&$.luoo.tip(a.msg)}var luooPlayer,log_int;$(document).ready(function(){if("undefined"!=typeof pl&&pl){var cssSelector={play:".icon-play",pause:".icon-pause"},cssSelectorAncestor={jPlayer:"#luooPlayerContent",cssSelectorAncestor:"#luooPlayerPlaylist"},options={playlistOptions:{autoPlay:!0,loopOnPrevious:!1,repeatone:!1},swfPath:$.luoo.root+"/static/thirdparty/jplayer",supplied:"mp3",loop:!1,playbackRate:2,keyEnabled:!0,cssSelector:cssSelector,volume:1,wmode:"window"};try{eval("var playlist = "+GibberishAES.dec(pl,$.luoo.cfg.aes))}catch(e){console.error("Error initating player")}if("undefined"==typeof playlist)return!1;luooPlayer=new jPlayerPlaylist(cssSelectorAncestor,playlist,options),$("#luooPlayerPlaylist").bind($.jPlayer.event.ready,function(){var a="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)});luooPlayer.playerid=a,$(".title").data("status","ready")}),$("#luooPlayerPlaylist").bind($.jPlayer.event.play,function(){var a=luooPlayer.playlist[luooPlayer.current],b=a.id,c=$("#track"+b);if($(".title").data("status","ready").removeClass("active"),c.data("status","play").addClass("active"),c.find(".icon-pause").css("display","inline-block"),parseInt($.luoo.res.uid)>0&&(clearTimeout(log_int),log_int=setTimeout(function(){$.luoo.get(url("data/play/"+luooPlayer.playlist[luooPlayer.current].id))},3e4)),"undefined"!=typeof window.WebSocket)try{var d="ws://muma.luoo.net:8000/",e=new WebSocket(d);e.onopen=function(){e.send(JSON.stringify({sessid:$.luoo.res.sessid,playerid:luooPlayer.playerid})),luooPlayer.readyStatus=1},e.onmessage=function(a){var a=JSON.parse(a.data);a.sessid==$.luoo.res.sessid&&luooPlayer.playerid!=a.playerid&&luooPlayer.pause()},e.onerror=function(a){},e.onclose=function(){}}catch(f){console.error("websocket error")}}),$("#luooPlayerPlaylist").bind($.jPlayer.event.pause,function(a){var b=$("#track"+luooPlayer.playlist[luooPlayer.current].id);b.data("status","pause"),b.find(".icon-pause").css("display","none"),b.find(".icon-play").css("display","inline-block")}),$(".icon-info").click(function(){var a=$(this).data("sid"),b=$("#lyric"+a);console.log(!b.html()),b.is($(":visible"))?($("#remark"+a).show(),b.hide()):$.trim(b.html())?($("#remark"+a).hide(),b.show()):$.luoo.get(url("single/lyric/"+a),{},function(a,b){var c=$("#lyric"+b);a.lyric?c.html(a.lyric.content):c.html('<p style="margin: 60px auto; text-align: center;"><a href="javascript:;" class="btn btn-positive btn-add-lyric" data-sid="'+b+'">添加歌词</a></p>'),$("#remark"+b).hide(),c.show()},a)}),$(".title").click(function(){var a=$(this),b=0;for(var c in luooPlayer.playlist)luooPlayer.playlist[c].id==a.data("id")&&(b=c);"play"==a.data("status")?(a.data("status","pause"),luooPlayer.pause()):luooPlayer.current==b?(a.data("status","play").addClass("active"),luooPlayer.play()):(a.data("status","play").addClass("active"),luooPlayer.play(b))}),$(".title").hover(function(){var a=$(this);"ready"==a.data("status")&&a.find(".icon-play").css("display","inline-block")},function(){var a=$(this);"ready"==a.data("status")&&a.find(".icon-play").hide()})}});